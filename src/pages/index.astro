---
import { getCollection } from 'astro:content';

// 共通レイアウト
import BaseLayout from '../layouts/BaseLayout.astro';

// トップセクションで使用するコンポーネント
import Hero from '../components/Hero.astro';
import Icon from '../components/Icon.astro';
import Pill from '../components/Pill.astro';
import Skills from '../components/Skills.astro';
import Grid from '../components/Grid.astro';
import PortfolioPreview from '../components/PortfolioPreview.astro';

// Work 用のプロジェクト一覧（最新 4 件）
const projects = (await getCollection('work'))
  .sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
  .slice(0, 4);
---

<BaseLayout>
  <!-- ================= TOP / HOME ================= -->
  <section id="home" class="stack gap-20 lg:gap-48">
    <div class="wrapper stack gap-8 lg:gap-20">
      <header class="hero">
        <Hero title="Kengo Hoi" tagline="Welcome to my portfolio!" align="start">
        </Hero>
      </header>
    </div>
  </section>

  <!-- ================= ABOUT ================= -->
  <section id="about" class="wrapper stack gap-16 lg:gap-24 about-section">
    <h2>About</h2>

    <h3 class="sub-heading">名前</h3>
    <p>帆井 健悟（Hoi Kengo）</p>

    <h3 class="sub-heading">学歴</h3>
    <ul class="timeline">
      <li><strong>2020/03</strong> 渋谷教育学園幕張高等学校 卒業</li>
      <li><strong>2025/03</strong> 北海道大学工学部 情報エレクトロニクス学科 情報理工学コース 卒業</li>
      <li><strong>2025/04</strong> 北海道大学大学院情報科学院 情報理工学コース・調和系工学研究室 在籍（修士1年）</li>
    </ul>

    <h3 class="sub-heading">スキル</h3>
    <ul class="skills-list grid gap-2 md:gap-4" style="list-style:none;">
      <li>C / C++</li>
      <li>Python (PyTorch, TensorFlow)</li>
      <li>Java / Ruby</li>
      <li>HTML / CSS</li>
      <li>MATLAB</li>
      <li>Linux</li>
      <li>Arduino &amp; Raspberry Pi プロトタイピング</li>
      <li>Unity / Blender</li>
    </ul>

    <h3 class="sub-heading">興味のある技術分野</h3>
    <p>コンピュータグラフィックス（3DCG / XR など）</p>
  </section>

  <!-- ================= WORK ================= -->
  <section id="work" class="wrapper stack gap-16 lg:gap-24 work-section">
    <h2>Work</h2>

    <!-- 研究 -->
    <h3 class="sub-heading">研究</h3>
    <p>
      ステレオカメラのみを入力とした自動運転 End‑to‑End&nbsp;(E2E) モデルの研究に取り組み、<br />
      ネットワーク圧縮によるコスト削減と推論高速化を達成しました。<br />
      Astemo 株式会社との共同研究として&nbsp;2024 年 10 月に開始し、卒業論文までの短期間で成果を創出。<br />
      国内学会（複雑系マイクロシンポジウム 2025、人工知能学会全国大会&nbsp;JSAI 2025）にて発表済み。
    </p>

    <!-- アルバイト制作 -->
    <h3 class="sub-heading">アルバイトでの制作</h3>
    <p>
      化粧品広告の薬機法チェックを LLM で自動化するプロジェクトに開発メンバーとして参画。<br />
      コアとなる広告チェック機能を実装し、弁護士事務所・クライアント企業・開発チーム間の調整を経験しました。
    </p>

    <!-- CG 制作・アドオン開発 -->
    <h3 class="sub-heading">CG 制作・アドオン開発</h3>
    <p>
      Blender でのキャラクターモデリングや、VS Code からスクリプトを簡単に実行できる
      Blender 用アドオン <code>OpenTextFile</code> を開発。
      3DCG 制作フローを効率化するツール開発と表現の両面でスキルを磨いています。
      （<a href="https://github.com/kengo6053/OpenTextFile" target="_blank" rel="noopener">GitHub リポジトリ</a>）
    </p>

    <!-- 最近のプロジェクトギャラリー -->
    <h3 class="sub-heading">Recent Projects</h3>
    <Grid variant="offset">
      {
        projects.map((project) => (
          <li>
            <PortfolioPreview project={project} />
          </li>
        ))
      }
    </Grid>
  </section>
</BaseLayout>

<style>
  /* ------- About Section ------- */
  .sub-heading {
    font-weight: 600;
    margin-top: 1.25rem;
  }
  .timeline {
    display: grid;
    gap: .25rem;
    list-style: none;
    padding-left: 0;
  }
  .timeline li {
    position: relative;
    padding-left: 1.75rem;
  }
  .timeline li::before {
    content: "";
    position: absolute;
    left: 0;
    top: .5em;
    width: .65em;
    height: .65em;
    border-radius: 50%;
    background: var(--accent);
  }
  .skills-list {
    grid-template-columns: repeat(auto-fit,minmax(10rem,1fr));
  }
  /* ------- Sections Spacing ------- */
  #about, #work {
    margin-top: 6rem;
  }
</style>
